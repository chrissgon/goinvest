name: indicators

steps:
  init:
    next:
      default: welcome

  welcome:
    action: Text
    next:
      default: stockOrFund
    parameters:
      texts:
        - Olá, bem vindo ao atendente virtual do Go Invest.

  stockOrFund:
    next:
      ^[a-zA-Z]{4}(1|2|3|4|5|6|7|8|9|10|11)$: stockSearch
      ^[a-zA-Z]{4}(11|12|13|14|15)$: fundSearch
      default: wrongStockOrFund
    action: Input
    parameters:
      texts:
        - Digite o ticket de uma Ação (PETR4) ou FII (MXRF11) para iniciar a busca.
        -

  wrongStockOrFund:
    next:
      default: stockOrFund
    action: Text
    parameters:
      texts:
        - O ticket informado não existe. Por favor tente outro.

  # stock
  # stockInput:
  #   action: Input
  #   next:
  #     ^[a-zA-Z]{4}[0-9]{1,2}$: stockSearch
  #     default: wrongStockID
  #   parameters:
  #     texts:
  #       - Por favor, digite o ticket da ação que deseja buscar.
  #       - Exemplo (PETR4)

  wrongStockID:
    next:
      default: stockInput
    action: Text
    parameters:
      texts:
        - Ticket informado incorreto.

  stockSearch:
    action: SearchStock
    next:
      default: stockOrFund

  # fund
  # fundInput:
  #   action: Input
  #   next:
  #     ^[a-zA-Z]{4}(11|12|13|14|15)$: fundSearch
  #     default: wrongFundID
  #   parameters:
  #     texts:
  #       - Por favor, digite o ticket do fundo que deseja buscar.
  #       - Exemplo (MXRF11)

  # wrongFundID:
  #   next:
  #     default: fundInput
  #   action: Text
  #   parameters:
  #     texts:
  #       - Ticket informado incorreto.

  fundSearch:
    action: SearchFund
    next:
      default: stockOrFund